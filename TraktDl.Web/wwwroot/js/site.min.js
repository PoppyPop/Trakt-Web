function resetBlacklist(){$("#blacklistReset").addClass("fa-spin");$.ajax({type:"POST",url:uri+"/ResetBlacklist",success:function(){$("#blacklistReset").removeClass("fa-spin");getData()}})}function resetImages(){$("#imagesReset").addClass("fa-spin");$.ajax({type:"POST",url:uri+"/ResetImages",success:function(){$("#imagesReset").removeClass("fa-spin");getData()}})}function updateTraking(){$("#updateButton").addClass("fa-spin");$.ajax({type:"POST",url:uri,success:function(){$("#updateButton").removeClass("fa-spin");getData()}})}function updateImages(){$("#imagesButton").addClass("fa-spin");$.ajax({type:"POST",url:uri+"/Images",success:function(){$("#imagesButton").removeClass("fa-spin");getData()}})}function updateImage(n){$.ajax({type:"POST",url:uri+"/"+n+"/Images",success:function(t){$("#show-poster-"+n).attr("src",t.posterUrl);t.nextEpisodeToCollect&&$("#show-collect-poster-"+n).attr("src",t.nextEpisodeToCollect.posterUrl)}})}function getData(){$("#progress-wrapper").empty();$("#refreshButton").addClass("fa-spin");$.ajax({type:"GET",url:uri+"/missings",success:function(n){$.each(n,function(n,t){$("#refreshButton").removeClass("fa-spin");$("#progress-wrapper").append(Handlebars.templates.row(t));t.posterUrl&&(!t.nextEpisodeToCollect||t.nextEpisodeToCollect.posterUrl)||updateImage(t.id)})}})}const uri="api/show";HandlebarsIntl.registerWith(Handlebars);Handlebars.registerHelper("progress-status",function(n){return n>=0&&n<25?"danger":n>=25&&n<50?"warning":n>=50&&n<75?"info":"success"});Handlebars.registerHelper("truncate",function(n){return n&&n.length>41?n.substring(0,38)+"...":n});Handlebars.registerHelper("episode-status",function(n){return n===0?"other":n===1?"check":"delete"});$(document).ready(function(){getData()});